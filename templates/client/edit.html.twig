{% extends 'base.html.twig' %}

{% block title %}Modifier un client
{% endblock %}

{% block body %}
	<div class="w-full px-4 py-6">
		<div class="mb-6 md:mb-8 text-center md:text-left flex flex-col md:flex-row md:items-center md:justify-between">
			<div>
				<h1 class="text-xl sm:text-2xl md:text-3xl font-bold text-gray-900 flex items-center">
					<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" style="color: #c99b64;" fill="none" viewbox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/></svg>
					Modifier un client
				</h1>
				<p class="text-sm sm:text-base text-gray-600 mt-2">Modifiez les informations du client
					{{ client.nom }}</p>
			</div>
			<a href="{{ path('client_index') }}" class="ml-3 inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50">
				<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" fill="none" viewbox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/></svg>
				Retour à la liste
			</a>
		</div>

		<div class="bg-white rounded-xl shadow-md p-6 max-w-2xl mx-auto">
			{{ form_start(form, {'attr': {'class': 'space-y-6'}}) }}

			<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
				<div>
					{{ form_label(form.nom, null, {'label_attr': {'class': 'block text-sm font-medium text-gray-700 mb-1'}}) }}
					{{ form_widget(form.nom, {'attr': {'class':'block w-full rounded-md border-gray-300 shadow-sm sm:text-sm'}}) }}
					{{ form_errors(form.nom) }}
				</div>

				<div>
					{{ form_label(form.type, null, {'label_attr': {'class': 'block text-sm font-medium text-gray-700 mb-1'}}) }}
					{{ form_widget(form.type, {'attr': {'class':'block w-full rounded-md border-gray-300 shadow-sm sm:text-sm'}}) }}
					{{ form_errors(form.type) }}
				</div>
			</div>

			<div>
				{{ form_label(form.adresse, null, {'label_attr': {'class': 'block text-sm font-medium text-gray-700 mb-1'}}) }}
				{{ form_widget(form.adresse, {'attr': {'class':'block w-full rounded-md border-gray-300 shadow-sm sm:text-sm'}}) }}
				{{ form_errors(form.adresse) }}
			</div>

			<div>
				{{ form_label(form.siren, null, {'label_attr': {'class': 'block text-sm font-medium text-gray-700 mb-1'}}) }}
				{{ form_widget(form.siren, {'attr': {'class':'block w-full rounded-md border-gray-300 shadow-sm sm:text-sm'}}) }}
				{{ form_errors(form.siren) }}
			</div>

			<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
				<div>
					{{ form_label(form.contactNom, null, {'label_attr': {'class': 'block text-sm font-medium text-gray-700 mb-1'}}) }}
					{{ form_widget(form.contactNom, {'attr': {'class':'block w-full rounded-md border-gray-300 shadow-sm sm:text-sm'}}) }}
					{{ form_errors(form.contactNom) }}
				</div>

				<div>
					{{ form_label(form.contactEmail, null, {'label_attr': {'class': 'block text-sm font-medium text-gray-700 mb-1'}}) }}
					{{ form_widget(form.contactEmail, {'attr': {'class':'block w-full rounded-md border-gray-300 shadow-sm sm:text-sm'}}) }}
					{{ form_errors(form.contactEmail) }}
				</div>
			</div>

			<div class="flex justify-end pt-5">
				<a href="{{ path('client_index') }}" class="rounded-md bg-white py-2 px-3 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50">
					Annuler
				</a>
				<button type="submit" class="btn ml-3 inline-flex justify-center rounded-md bg-blue-600 py-2 px-3 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600">
					Enregistrer
				</button>
			</div>
			{{ form_end(form) }}
		</div>

		<!-- Modal de confirmation de suppression -->
		<div id="confirmDelete" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center hidden z-50">
			<div class="bg-white rounded-lg p-6 max-w-md w-full mx-4">
				<h3 class="text-lg font-bold text-gray-900 mb-4">Confirmer la suppression</h3>
				<p class="mb-6 text-gray-700">Êtes-vous sûr de vouloir supprimer le client
					<strong>{{ client.nom }}</strong>
					?</p>
				<p class="mb-6 text-sm text-red-600 font-medium">Cette action est irréversible.</p>
				<div class="flex justify-end space-x-3">
					<button type="button" class="inline-flex items-center px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300" onclick="document.getElementById('confirmDelete').style.display='none'">
						Annuler
					</button>
					<form action="{{ path('client_delete', {'id': client.clientId}) }}" method="post">
						<input type="hidden" name="_token" value="{{ csrf_token('delete-client' ~ client.clientId) }}">
						<button type="submit" class="inline-flex items-center px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700">
							<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none" viewbox="0 0 24 24" stroke="currentColor">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
							</svg>
							Confirmer la suppression
						</button>
					</form>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
